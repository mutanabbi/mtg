See http://deckstats.net/decks/905/3382-new-simic/en
Tabs делаются на jQuery
Таблицы и сортировка через jQuery плагин datatable http://www.datatables.net/
Для рисовани стопок тупо используем
.card-cont > img {
  position: absolute;
  float: left;
  display: inherit;
}
img:nth-child(1) {
  z-index: 0;
  top: 0px;
}

todo: Как организовать мета-статистику и интерфейс для оной (навигацию между xml-ками с соответствующими деками)
todo: Нет ли необходимости в единой базе данных?
todo: Поддержка истории изменений
todo: Сайдборд
todo: Заменить deque на deck
todo: Для боевой версии необходима возможность распечатки проксей
todo: Желательно наличие эмулятора игры (наряду с просмотром сдачи) для продвинутого анализа сдачи
todo: Узнать какие бывают архетипы и как формализовать принадлежность к ним
todo: Рекомендация какие карты становятся нелегальными при попытке сменить формат колоды (какие карты нужно заменить). Могут ли они быть заменены на карты из сайдборда?
todo: ссылка на "похожие" деки. Как определять степень схожети -  формула?
todo: Автоматически детектить карты-источники манны
todo: записи в таблицах подсвечиваются при щелчке по соответствуюему столбцу/секции диаграммы, отображая проасоциированные карты
todo: смена цветогого отображения в таблицах. Например от светло-зеленого к красному по принципу увеличения манастоимости. Или отображать градиентом цвет манна-стоимости. Или цвета для групп по типам карт. Или по количеству (группам одинаковых вероятностей). Каковы элементы управления?
todo: total mana cost. Можно ли в DataTables сортировать по двум объединенным в одну столбцам (colspan)
todo: импорт дек с разнообразных сервисов. Тот же mymagic.ru, deckstats.net
todo: другие дата-провайдеры цен кроме TCGPlayer. miraclegames.de, к примеру. А еще лучше русские

div Статистика по декам
  См. div Сквозные характеристики.
  Таблица с полями: Имя деки, Владелец, дата создания, цвет (с весами), оценка + сквозные характеристики
  Формат деки это просто группировка
  Сортировка по любому полю
  Фильтры

div Статистика по картам в всех деках
  Рейтингии (Топы)
    популярности
    встречаемости
      абсолютной (количетво во всех деках)
      относительной (количество дек с этой картой)
    стоимости(мана)
    цены($)

div Общая информация
  Название деки
  Владелец
  Дата создания
  Количество карт
  Количество земель
  Цвет деки
  Формат деки (на основе легальности карт). Может быть протегана несколькими
  Цена деки

div Метрики манны (Manalyzer)
  Total cost колоды
  Total по каждому цвету (для помощи в выборе количества земель) При этом двуцветные карты можно рассматривать как каждый цвет или как Gold
  Количество карт соответствующего цвета
  Средний mana cost

div Диаграммы (http://www.jqplot.com/tests/)
  Кривая манны
    Кривая по типу карт
    Кривая по цвету (фигурирует Gold)
    Те же кривые, но с вероятностями
Круговая диограмма распределения
    Цветов в колоде
    Типов карт в колоде
    Источников манн в колоде

div Сквозные характеристики колоды #TODO продумать формулы и алгоритмы (не очень понятно как считать синергию)
  Сила колоды
  Синергия колоды
  Скорость колоды
  Автоматическое определение архетипа колоды (Агро, Комбо, Контроль и т.д.) Возможно в виде коэффициентов каждого типа

div Таблица списка карт деки (div с такой же табличкой для сайдборда) с сортировкой по каждому полю
  Количество
  Имя
  Тип-Подтип-Супертип
  Мана
  Сет
  Цена

tab Визуальное отображение
  Все карты в колоде. Дубликаты отображаются визуально одна за другой
  Земли сгруппированы отдельно
  Фильтрация (продумать интейрфейс и механизм)

tab Тест играбельности
  Тестовая рука
  Муллиган
  Новая рука

tab Вероятности (Probabilities/Odds)
  Таблица Карта/номер хода
  Сортировка по Имени и значениям вероятности в каждом ходу
  Количество ходов ограничено (вероятно 10-ю)
  Вариант таблицы с вероятностью получить карту и иметь реурсы сыграть ее (условная вероятность наличия карты соответствующем ходу И наличия нужного количества карт земель/источников манны)
  todo: рекомендации по изменнению колоды для оптимизации вероятности
  таблица/другой механизм для подсчета вероятности сыграть выбранное комбо. Можно ли реализовать в рамках той же таблицы? (например сортировками по нескольким колонкам)
  Вероятности по мулиганам - 2 случая. Общий случай (условная вероятность). Если не встретилась в руке (для поиска карты).

http://hijos.ru/izuchenie-matematiki/algebra-10-klass/19-razmeshheniya-perestanovki-sochetaniya-s-povtoreniyami-formula-vklyucheniya-isklyucheniya/
http://www.bseu.by/hm/uchm/pract_tv/Pract_tv.pdf
Вероятности
  Размещение (из n по m)
    уникальное: n!(n - m)!
    с повторениями: n^m

  Сочетание [combination]
  (сочетанием из n по m называется набор m элементов, выбранных из данного множества, содержащего n различных элементов)
  Отличие от размещений: Наборы, отличающиеся только порядком следования элементов (но не составом), считаются одинаковыми
    уникальные: Биномиальный коэффициент n по m = n!/(m!(n-m))!
    Подходит для расчета количества способов (знаменатель вероятности), которыми можно получить стартовую руку для обычных карт (каждая карта уникальна и определяется значением и мастью)

    с повторениями: (n + m - 1)!/(m!(n - 1)!)
    с кратностю повторений: Если каждому элементу некоторого конечного множества поставлено в соответствие целое неотрицательное число — кратность данного элемента, то говорят, что задано сочетание с повторениями. Сумма k кратностей всех элементов называется порядком сочетания.
    биномиальный коэффициент С(n + k - 1 по k)

  Перестановка [permutation] (частный случай размещения) = размещение из n по n (сколькими способами карты из имеющейся руки могли прийти в игру)
    уникальные: n!
    с повторениями: n!/k1!k2!k3!...kj!, где kN - количество элементов соответствующего типа

http://www.kibble.net/magic/math.php
http://www.kibble.net/magic/magic10.php
Гипергеометрическое распределение HYPGEOMDIST (N, Z, X, Y) в Экселе
H (N) = C (X, N) * C (Y - X, Z - N) / C (Y, Z)
X stands for the number of a certain card that you have in the deck.
Y is the number of cards in the deck.
Z is the number of cards you are drawing.
N is the number you are checking for.

В терминах википедии http://ru.wikipedia.org/wiki/%D0%93%D0%B8%D0%BF%D0%B5%D1%80%D0%B3%D0%B5%D0%BE%D0%BC%D0%B5%D1%82%D1%80%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%80%D0%B0%D1%81%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5
f(k;N,D,n) = C(D, k) * C(N - D, n - k)/ C(N, n)
C(D,k) - Биномиальный коэффициент из D по k
k - вытянуто бракованых                     = N
N = всего карт                              = Y
D = количество "бракованных" карт в колоде  = X
n = размер руки                             = Z

k = 0  (в руке ни одной карты Гоблина)
N = 60 (в колоде 60 карт)
D = 4  (4 карты Гоблина)
n = 7  (размер руки 7)


Биномиальный коэффициент C(n по k) = n!/(k!(n - k)!) = n(n - 1)(n - 2)...(n - k - 1)/k!
В нашем случае n = n + k - 1; С(n + k - 1 по k) = (n + k - 1)(n + k - 1 - 1)(n + k - 1 - 2)...(n + k - 1 - k - 1)/k! = (n + k - 1)(n + k - 2)...(n - 2)/k!
или (n+k-1)!/(k!(n+k-1 - k)!) = (n+k-1)!/(k!(n - 1)!)

Пример:
Карта Goblin


Дано
  Число различных карт M
  Общее число карт N >=M


shuffle - тассование, рандомизация
  riffle shuffle - смешивание двух стопочек
  pile shuffle (table shuffling)
  overhand shuffle - стандартный способ тассования (как привыкли у нас). Наимение эффективный
riffle - тасовка перелистыванием. 7-riffle shuffle
pile - кучка
